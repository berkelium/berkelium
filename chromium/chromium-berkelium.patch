Index: src/chrome/browser/ui/gtk/browser_window_gtk.cc
===================================================================
--- src/chrome/browser/ui/gtk/browser_window_gtk.cc	(revision 235101)
+++ src/chrome/browser/ui/gtk/browser_window_gtk.cc	(working copy)
@@ -2416,7 +2416,11 @@
 }
 
 // static
+#if 0 // berkelium patch: remove
 BrowserWindow* BrowserWindow::CreateBrowserWindow(Browser* browser) {
+#else // berkelium patch: added
+BrowserWindow* BerkeliumCreateBrowserWindow(Browser* browser) {
+#endif // berkelium patch: end
   BrowserWindowGtk* browser_window_gtk = new BrowserWindowGtk(browser);
   browser_window_gtk->Init();
   return browser_window_gtk;
Index: src/chrome/app/chrome_main.cc
===================================================================
--- src/chrome/app/chrome_main.cc	(revision 235101)
+++ src/chrome/app/chrome_main.cc	(working copy)
@@ -39,3 +39,13 @@
   return content::ContentMain(argc, argv, &chrome_main_delegate);
 #endif
 }
+
+#if 1 // berkelium patch: added
+#include "chrome/browser/ui/browser_window.h"
+
+BrowserWindow* BerkeliumCreateBrowserWindow(Browser*);
+
+BrowserWindow* BrowserWindow::CreateBrowserWindow(Browser* browser) {
+  return BerkeliumCreateBrowserWindow(browser);
+}
+#endif // berkelium patch: end
Index: src/chrome/chrome_exe.gypi
===================================================================
--- src/chrome/chrome_exe.gypi	(revision 235101)
+++ src/chrome/chrome_exe.gypi	(working copy)
@@ -5,6 +5,37 @@
 {
   'targets': [
     {
+# BERKELIUM PATCH: added
+      # this is the target used to build berkelium host
+      'target_name': 'berkelium',
+      'type': 'executable',
+      'sources': [
+        '../../../berkelium-host/src/berkelium/BerkeliumChromiumDelegate.cpp',
+        '../../../berkelium-host/src/berkelium/BerkeliumMain.cpp',
+        '../../../berkelium-host/src/berkelium/BrowserWindow.cpp',
+        '../../../berkelium-host/src/berkelium/MemoryRenderViewHostFactory.cpp',
+        '../../../berkelium-host/src/berkelium/MemoryRenderViewHostFactory.hpp',
+        '../../../berkelium-host/src/berkelium/Rect.hpp',
+      ],
+      'cflags': [
+        '-std=c++0x',
+      ],
+      'defines': [
+        'BERKELIUM_CPP_IMPL',
+      ],
+      'include_dirs': [
+        '../../../berkelium-cpp/src/host/shared',
+        '../../../berkelium-cpp/include',
+        '../url',
+      ],
+      'dependencies': [
+        '../skia/skia.gyp:skia',
+        #'../url/url.gyp:url_lib',
+        'chrome',
+      ],
+    },
+    {
+# BERKELIUM PATCH: end
       'target_name': 'chrome',
       'type': 'executable',
       'mac_bundle': 1,
@@ -30,6 +61,12 @@
         'app/metro_driver_win.h',
         '../content/app/startup_helper_win.cc',
       ],
+# BERKELIUM PATCH: added
+      # when berkelium patch is added, this dependency is needed to normaly link chromium
+      'dependencies': [
+        '../skia/skia.gyp:skia',
+      ],
+# BERKELIUM PATCH: end
       'mac_bundle_resources': [
         'app/app-Info.plist',
       ],
